<h2>Asset Details</h2>

<%= @asset.description %>
<%= @asset.purchase_cost %>
<form action="/assets/<%= @asset.id %>/edit"><button class="btn btn-warning">Edit Asset</button></form>

<%# get is read, post is create, put is update, delete is destroy %>
<form actions="/assets/<% @asset.id %>" method="post">
<input type="hidden" name="_method" value="delete">
<button class="btn btn-danger">delete</button>
</form>


<% if  session[:user_id]%>
<form action="/comments" method="post">
<input type='hidden' name="asset_id" value="<%= @asset.id %>">
<textarea name="body"></textarea> 
<button>post comment</button>
</form>
<% end %>

Total Expense Value: 
<%= @asset.maintenance_logs.sum(:expense_value) %>

Total Revenue Value:
<%= @asset.utilisation_logs.sum(:revenue_value) %>


<table class='table table-striped table-dark table-hover'>
<thead>
    <tr>
        <th scope="col font-weight-bold">Cost/Revenue</th>
        <th scope="col font-weight-bold">Name</th>
        <th scope="col font-weight-bold">Value</th>
        <th scope="col font-weight-bold">Date/Time Lodged</th>
    </tr>
<thead>
<tbody>
    <% @asset.maintenance_logs.each do |log| %>
    <tr>
            <th scope="col font-weight-bold"><%= "Cost" %></th>
            <th scope="col font-weight-bold"><%= log.maintenance_type.maintenance_name %></th>
            <th scope="col font-weight-bold text-danger"><%= log.expense_value %></th>
            <th scope="col font-weight-bold"><%= log.date_time %></th>
    </tr>
    <% end %>
    
    <% @asset.utilisation_logs.each do |log| %>
    <tr>
            <th scope="col font-weight-bold"><%= "Revenue" %></th>
            <th scope="col font-weight-bold"><%= log.revenue_type.revenue_name %></th>
            <th scope="col font-weight-bold"><%= log.revenue_value %></th>
            <th scope="col font-weight-bold"><%= log.date_time %></th>
    </tr>
    <% end %>

</tbody>
</table>